docker run -it \
-e POSTGRES_USER=root \
-e POSTGRES_PASSWORD=root \
-e POSTGRES_DB=ny_taxi \
-v $(pwd)/ny_taxi_postgres_data:/var/lib/postgresql/data \
-p 5432:5432 \
--network pg-network \
--name pg-database \
postgres:13

docker network create pg-network

docker run -it \
-p 8080:80 \
-e "PGADMIN_DEFAULT_EMAIL=admin@admin.com" \
-e "PGADMIN_DEFAULT_PASSWORD=admin" \
--network pg-network \
--name pgadmin \
dpage/pgadmin4

URL='https://github.com/DataTalksClub/nyc-tlc-data/releases/download/yellow/yellow_tripdata_2021-07.csv.gz'

python read_connect_write.py \
--user root \
--password root \
--host localhost \
--port 5432 \
--database ny_taxi \
--table yellow_taxi_trips \
--url $URL

docker build -t taxi_ingest:v1 .

docker run -it \
--network pg-network \
taxi_ingest:v1 \
--user root \
--password root \
--host pg-database \
--port 5432 \
--database ny_taxi \
--table yellow_taxi_trips \
--url $URL
